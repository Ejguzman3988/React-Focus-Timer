import e,{useState as t,useRef as o,useEffect as l}from"react";function r(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var l=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===o&&l.firstChild?l.insertBefore(r,l.firstChild):l.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}r(".button:hover{filter:brightness(90%) hue-rotate(var(--deg))}.button:active{filter:hue-rotate(calc(var(--deg) + 30deg))}.button{cursor:pointer;filter:hue-rotate(var(--deg))}.button__selected{filter:hue-rotate(calc(var(--deg) + 30deg)) brightness(130%)}.focus__buttons{align-items:center;display:flex;justify-content:center}");const n=({idx:t,icon:o,selected:l,handleSelected:r})=>e.createElement("span",{className:l?"button button__selected":"button",onClick:()=>r(o,t)},o),c=({buttons:t,selected:o,setSelected:l,setTime:r,setBlink:c,timerId:a,setTimerId:s,blinkId:i,setBlinkId:d,resetTime:m,myStorage:u})=>{const f=(e,t)=>{switch("üîÅ"===e||void 0!==t&&l((()=>t)),e){case"‚ñ∂Ô∏è":a||(s(setInterval((()=>{r((e=>e+1))}),1e3)),d(setInterval((()=>{c((e=>!e))}),500)));break;case"‚è∏Ô∏è":clearInterval(a),clearInterval(i),c(!0),s(null),d(null);break;case"‚èπÔ∏è":clearInterval(a),clearInterval(i),s(null),d(null),m();break;case"üîÅ":u.removeItem("focusHighScore"),r(0);break;default:return}};return e.createElement("div",{className:"focus__buttons"},t.map(((t,l)=>e.createElement(n,{key:l,idx:l,icon:t,selected:o===l,handleSelected:f}))))};r(".focus__timer{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}.clock{background:var(--clockColor);border:var(--fontColor) outset;color:var(--fontColor);font-family:digital-7;height:1.5rem;margin-right:15px;padding:5px}.clock__hide__colon{color:var(--clockColor)}@media only screen and (max-width:800px){.focus__timer{align-items:center;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center}}");const a=({hours:t,minutes:o,seconds:l,blink:r})=>e.createElement("div",{className:"clock"},e.createElement("span",null,t),e.createElement("span",{className:r?null:"clock__hide__colon"},":"),e.createElement("span",null,o),e.createElement("span",{className:r?null:"clock__hide__colon"},":"),e.createElement("span",null,l)),s=({time:r,setTime:n,label:s,buttons:i,myStorage:d})=>{const[m,u,f]=((e=0)=>[Math.floor(e/3600).toString().padStart(2,"0"),Math.floor(e/60%60).toString().padStart(2,"0"),(e%60).toString().padStart(2,"0")])(r),[g,p]=t(!0),[b,h]=t(void 0),[k,_]=t(null),[y,v]=t(null),C=o();C.current=r;l((()=>{const e=parseInt(d.getItem("focus"));return n(e||0),window.addEventListener("beforeunload",(e=>{clearInterval(k),clearInterval(y),d.setItem("focus",C.current)})),()=>{clearInterval(k),clearInterval(y),d.setItem("timer",r)}}),["Focus"===s]);const x={buttons:i,selected:b,setSelected:h,setTime:n,timerId:k,setTimerId:_,blink:g,setBlink:p,blinkId:y,setBlinkId:v,resetTime:()=>{n(0),p(!0)},myStorage:d};return e.createElement("span",{className:"focus__timer"},e.createElement("span",{className:"focus__label"},s,":"),e.createElement(a,{hours:m,minutes:u,seconds:f,blink:g}),e.createElement(c,x))};r(".focus__theme{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap}@media only screen and (max-width:800px){.focus__theme{align-items:center;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center}}");const i=({themeOption:t,toggle:o,setToggle:l,setTheme:r})=>e.createElement("div",{className:"focus__option",style:{border:`5px var(--${t.theme}-backgroundColor) double`,background:`var(--${t.theme}-clockColor)`,color:`var(--${t.theme}-backgroundColor)`},onClick:e=>{o||(console.log("newSet"),r(t)),l((e=>!e))}},t.theme),d=({theme:o,setTheme:l,themes:r})=>{const[n,c]=t(!1);return e.createElement("div",{className:"focus__theme"},e.createElement("div",{className:"focus__label"},"Theme: "),e.createElement("ul",{className:"focus__dropdown"},n?r?.map(((t,o)=>e.createElement(i,{key:o,themeOption:t,setTheme:l,setToggle:c}))):o&&e.createElement(i,{key:"default",themeOption:o,setTheme:l,toggle:n,setToggle:c})))};r(":root{--elegant-clockColor:#8a6626;--elegant-fontColor:#efc8b1;--elegant-backgroundColor:#efc8b1;--dependable-clockColor:#241f1c;--dependable-fontColor:#937047;--dependable-backgroundColor:#937047;--friendly-clockColor:#bdfff6;--friendly-fontColor:#e23c52;--friendly-backgroundColor:#e23c52;--laid-back-clockColor:#4d3227;--laid-back-fontColor:#ebc999;--laid-back-backgroundColor:#ebc999;--deg:180deg;--clockColor:var(--elegant-clockColor);--fontColor:var(--elegant-fontColor);--backgroundColor:var(--elegant-backgroundColor)}.focus__container{align-items:center;background-color:var(--backgroundColor);border-bottom:var(--clockColor) solid;box-shadow:var(--clockColor) 0,1px,10px;color:var(--clockColor);display:flex;font-size:1.5rem;justify-content:space-between;margin-bottom:10px;padding:5px;position:sticky;width:100%}.focus__container>div{display:inline-flex}@font-face{font-family:digital-7;src:url(../../fonts/digital-7.ttf)}@media only screen and (max-width:370px){.focus__container{-moz-transform:translateY(-30%) scale(.5);transform:translateY(-30%) scale(.5)}.focus__container,.focus__theme{align-items:center;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center}.focus__theme{border-bottom:var(--clockColor) solid;border-top:var(--clockColor) solid;padding-bottom:10%;padding-top:10%;width:100%}.focus__timer{align-items:center;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center}}");const m=()=>{const[o,r]=t(0),[n,c]=t(0),[a,i]=t(null),[m,u]=t(null),f=window.localStorage,g=document.querySelector(":root"),p=getComputedStyle(g);return l((()=>{const e=f.getItem("focusTheme"),t=f.getItem("focusAllThemes");i(e?e.split(","):{theme:"elegant",buttonDeg:"180deg"}),u(t||[{theme:"elegant",buttonDeg:"180deg"},{theme:"dependable",buttonDeg:"222deg"},{theme:"friendly",buttonDeg:"45deg"},{theme:"laid-back",buttonDeg:"250deg"}])}),[]),l((()=>{c((()=>(f.setItem("focusHighScore",o),o)))}),[o>n]),l((()=>{const e=f.getItem("focusTheme");if(e&&e!==a&&f.setItem("focusTheme",a),a){const e=p.getPropertyValue("--"+a.theme+"-clockColor"),t=p.getPropertyValue("--"+a.theme+"-fontColor"),o=p.getPropertyValue("--"+a.theme+"-backgroundColor");g.style.setProperty("--clockColor",e),g.style.setProperty("--fontColor",t),g.style.setProperty("--backgroundColor",o),g.style.setProperty("--deg",a.buttonDeg)}}),[a]),l((()=>{const e=JSON.parse(f.getItem("focusAllThemes"));e&&e!==m&&f.setItem("focusAllThemes",JSON.stringify(e))}),[m]),e.createElement("div",{className:"focus__container"},e.createElement(s,{label:"Focus",time:o,setTime:r,buttons:["‚ñ∂Ô∏è","‚è∏Ô∏è","‚èπÔ∏è"],myStorage:f}),e.createElement(d,{theme:a,setTheme:i,themes:m}),e.createElement(s,{label:"High Score",time:n,setTime:c,buttons:["üîÅ"],myStorage:f}))};export{m as FocusTimer};
